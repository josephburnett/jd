<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>jd</title>
  </head>
  <body>
    <p>
      <pre><legend id="command"
		   style="font-size:2em">jd a.json b.json</legend></pre>
    </p>
    <p id="crash" style="color:red"></p>
    <p style="width:50%;float:left">
      <legend id="a-label"
	      for="a-json"
	      style="text-align:center;font-size:2em"
	      >a.json</legend>
      <textarea id="a-json"
		rows="15"
		style="width:97%;border:solid 3px #080"
		placeholder='{"foo":"bar"}'
		></textarea>
      <legend id="a-error"
	      for="a-json"></legend>
    </p>
    <p style="width:50%;float:left">
      <legend id="b-label"
	      for="b-json"
	      style="text-align:center;font-size:2em"
	      >b.json</legend>
      <textarea id="b-json"
		rows="15"
		style="width:97%;border:solid 3px #080"
		placeholder='{"foo":"baz"}'
		></textarea>
      <legend id="b-error"
	      for="b-json"></legend>
    </p>
    <p style="width:100%;float:left">
      <legend id="diff-label"
	      style="text-align:center;font-size:2em"
	      >diff</legend>
      <textarea id="diff"
		rows="10"
		style="width:98.5%;border:solid 3px #ccc"
		placeholder='@ ["foo"]
- "bar"
+ "baz"'
		></textarea>
      <legend id="diff-error"
	      for="diff"></legend>
    </p>
    <legend id="options"
	    style="font-size:2em"
	    >options</legend>
    <p>
      <div>
	<input id="mode-diff"
	       type="radio"
	       name="mode"
	       value="diff"
	       checked>
	<label for="mode-diff">diff</label>
      </div>
      <div>
	<input id="mode-patch"
	       type="radio"
	       name="mode"
	       value="patch">
	<label for="mode-patch">patch</label>
      </div>
    </p>
    <p>
      <legend id="options-format-label"
	      >Data format:</legend>
      <div>
	<input id="format-json"
	       type="radio"
	       name="format"
	       value="json"
	       checked>
	<label for="format-json">"json"</label>
      </div>
      <div>
	<input id="format-yaml"
	       type="radio"
	       name="format"
	       value="yaml">
	<label for="format-yaml">"yaml"</label>
      </div>
    </p>
    <p>
      <legend id="options-diff-format-label"
	      >Diff format:</legend>
      <div>
	<input id="diff-format-jd"
	       type="radio"
	       name="diff-format"
	       value="jd"
	       checked>
	<label for="diff-format-json">"jd"</label>
      </div>
      <div>
	<input id="diff-format-patch"
	       type="radio"
	       name="diff-format"
	       value="patch">
	<label for="diff-format-patch">"patch" (RFC 6902)</label>
      </div>
      <div>
	<input id="diff-format-merge"
	       type="radio"
	       name="diff-format"
	       value="merge">
	<label for="diff-format-merge">"merge" (RFC 7386)</label>
      </div>
    </p>
    <p>
      <legend id="options-array-label"
	      >Treat arrays as an:</legend>
      <div>
	<input id="array-list"
	       type="radio"
	       name="array"
	       value="list"
	       checked>
	<label for="array-list">ordered list</label>
      </div>
      <div>
	<input id="array-set"
	       type="radio"
	       name="array"
	       value="set">
	<label for="array-set">unordered set</label>
      </div>
      <div>
	<input id="array-mset"
	       type="radio"
	       name="array"
	       value="mset">
	<label for="array-mset">unordered multiset (bag)</label>
      </div>
    </p>
    <legend id="about"
	    style="font-size:2em"
	    >about</legend>
    <p>
      <b>jd</b> is a free and open-source tool for comparing
      <a href="https://www.json.org">JSON</a>
      or <a href="https://yaml.org/">YAML</a> values. The output
      (diff) is easy for humans to read and can also be used to
      programmatically modify (patch) other values. It looks similar to
      the
      <a href="https://www.gnu.org/software/diffutils/manual/html_node/Example-Unified.html#Example-Unified">unified
      diff format</a>. Read more about the diff
      language <a href="https://github.com/josephburnett/jd/blob/master/README.md#diff-language">here</a>.
    </p>
    <p>
      This page is a web interface for jd. Enter two JSON values in
      the a.json and b.json fields and the output will be shown in the
      diff field. Switch the Options to patch and the diff will be
      applied to a.json to produce b.json. Switch the format to YAML
      to read and write YAML instead of JSON. The tool runs entirely
      in the browser and no data is sent outside the page. Its safe to
      use.
    </p>
    <p>
      jd is also available as
      a <a href="https://github.com/josephburnett/jd/releases">commandline
      tool</a> and
      a <a href="https://github.com/josephburnett/jd/tree/master/lib">golang
      library</a>. The source code is available
      at <a href="https://github.com/josephburnett/jd">https://github.com/josephburnett/jd</a>.
      Bug reports, questions and suggestions
      are <a href="https://github.com/josephburnett/jd/issues">welcome</a>.
    </p>
    <script src="wasm_exec.js"></script>
    <script>
      const go = new Go();
      WebAssembly.instantiateStreaming(fetch("jd.wasm"), go.importObject).then((result) => {
    	  go.run(result.instance);
      });
    </script>
  </body>
</html>
