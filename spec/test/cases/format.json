[
  {
    "name": "patch_format_output",
    "description": "Generate RFC 6902 JSON Patch format",
    "category": "format",
    "content_a": "{\"foo\":\"bar\"}",
    "content_b": "{\"foo\":\"baz\"}",
    "args": ["-f=patch"],
    "expected_diff": "[{\"op\":\"test\",\"path\":\"/foo\",\"value\":\"bar\"},{\"op\":\"remove\",\"path\":\"/foo\",\"value\":\"bar\"},{\"op\":\"add\",\"path\":\"/foo\",\"value\":\"baz\"}]\n",
    "expected_exit": 1,
    "compliance_level": "format"
  },
  {
    "name": "patch_format_addition",
    "description": "JSON Patch format for addition",
    "category": "format",
    "content_a": "{}",
    "content_b": "{\"new\":\"value\"}",
    "args": ["-f=patch"],
    "expected_diff": "[{\"op\":\"add\",\"path\":\"/new\",\"value\":\"value\"}]\n",
    "expected_exit": 1,
    "compliance_level": "format"
  },
  {
    "name": "patch_format_removal",
    "description": "JSON Patch format for removal",
    "category": "format",
    "content_a": "{\"old\":\"value\"}",
    "content_b": "{}",
    "args": ["-f=patch"],
    "expected_diff": "[{\"op\":\"test\",\"path\":\"/old\",\"value\":\"value\"},{\"op\":\"remove\",\"path\":\"/old\",\"value\":\"value\"}]\n",
    "expected_exit": 1,
    "compliance_level": "format"
  },
  {
    "name": "patch_format_array",
    "description": "JSON Patch format for array operations",
    "category": "format",
    "content_a": "[1,2]",
    "content_b": "[1,3]",
    "args": ["-f=patch"],
    "expected_diff": "[{\"op\":\"test\",\"path\":\"/1\",\"value\":2},{\"op\":\"remove\",\"path\":\"/1\",\"value\":2},{\"op\":\"add\",\"path\":\"/1\",\"value\":3}]\n",
    "expected_exit": 1,
    "compliance_level": "format"
  },
  {
    "name": "merge_format_output",
    "description": "Generate RFC 7386 JSON Merge Patch format", 
    "category": "format",
    "content_a": "{\"a\":\"b\"}",
    "content_b": "{\"a\":\"c\"}",
    "args": ["-f=merge"],
    "expected_diff": "{\"a\":\"c\"}\n",
    "expected_exit": 1,
    "compliance_level": "format"
  },
  {
    "name": "merge_format_addition",
    "description": "JSON Merge Patch format for addition",
    "category": "format", 
    "content_a": "{\"existing\":1}",
    "content_b": "{\"existing\":1,\"new\":2}",
    "args": ["-f=merge"],
    "expected_diff": "{\"new\":2}\n",
    "expected_exit": 1,
    "compliance_level": "format"
  },
  {
    "name": "merge_format_removal",
    "description": "JSON Merge Patch format for removal (null)",
    "category": "format",
    "content_a": "{\"keep\":1,\"remove\":2}",
    "content_b": "{\"keep\":1}",
    "args": ["-f=merge"],
    "expected_diff": "{\"remove\":null}\n",
    "expected_exit": 1,
    "compliance_level": "format"
  },
  {
    "name": "translate_jd_to_patch",
    "description": "Translate jd format to JSON Patch",
    "category": "translation",
    "content_a": "@ [\"foo\"]\n- \"bar\"\n+ \"baz\"\n",
    "args": ["-t=jd2patch"],
    "expected_diff": "[{\"op\":\"test\",\"path\":\"/foo\",\"value\":\"bar\"},{\"op\":\"remove\",\"path\":\"/foo\",\"value\":\"bar\"},{\"op\":\"add\",\"path\":\"/foo\",\"value\":\"baz\"}]\n",
    "expected_exit": 0,
    "compliance_level": "format"
  },
  {
    "name": "translate_patch_to_jd",
    "description": "Translate JSON Patch to jd format",
    "category": "translation",
    "content_a": "[{\"op\":\"add\",\"path\":\"/foo\",\"value\":\"bar\"}]\n",
    "args": ["-t=patch2jd"],
    "expected_diff": "@ [\"foo\"]\n+ \"bar\"\n",
    "expected_exit": 0,
    "compliance_level": "format"
  },
  {
    "name": "translate_jd_to_merge",
    "description": "Translate jd format to JSON Merge Patch",
    "category": "translation",
    "content_a": "@ [\"a\"]\n+ \"b\"\n",
    "args": ["-t=jd2merge"],
    "expected_diff": "{\"a\":\"b\"}\n", 
    "expected_exit": 0,
    "compliance_level": "format"
  },
  {
    "name": "translate_merge_to_jd",
    "description": "Translate JSON Merge Patch to jd format",
    "category": "translation",
    "content_a": "{\"foo\":\"bar\"}\n",
    "args": ["-t=merge2jd"],
    "expected_diff": "^ \"MERGE\"\n@ [\"foo\"]\n+ \"bar\"\n",
    "expected_exit": 0,
    "compliance_level": "format"
  },
  {
    "name": "translate_json_to_yaml",
    "description": "Translate JSON to YAML format",
    "category": "translation",
    "content_a": "{\"name\":\"Alice\",\"age\":30}\n",
    "args": ["-t=json2yaml"],
    "expected_diff": "age: 30\nname: Alice\n",
    "expected_exit": 0,
    "compliance_level": "format"
  },
  {
    "name": "translate_yaml_to_json",
    "description": "Translate YAML to JSON format",
    "category": "translation",
    "content_a": "name: Alice\nage: 30\n",
    "args": ["-t=yaml2json"],
    "expected_diff": "{\"age\":30,\"name\":\"Alice\"}\n",
    "expected_exit": 0,
    "compliance_level": "format"
  },
  {
    "name": "patch_mode_application",
    "description": "Apply patch to document using -p flag",
    "category": "patching",
    "content_a": "@ [\"value\"]\n+ 42\n",
    "content_b": "{}",
    "args": ["-p"],
    "expected_diff": "{\"value\":42}\n",
    "expected_exit": 0,
    "compliance_level": "format"
  },
  {
    "name": "patch_mode_array_context",
    "description": "Apply array patch with context validation",
    "category": "patching",
    "content_a": "@ [1]\n[\n  \"a\"\n- \"b\"\n+ \"x\"\n  \"c\"\n]\n",
    "content_b": "[\"a\",\"b\",\"c\"]",
    "args": ["-p"],
    "expected_diff": "[\"a\",\"x\",\"c\"]\n",
    "expected_exit": 0,
    "compliance_level": "format"
  },
  {
    "name": "patch_mode_context_error",
    "description": "Patch application fails with context mismatch", 
    "category": "patching",
    "content_a": "@ [0]\n[\n  \"wrong\"\n- \"b\"\n+ \"x\"\n]\n",
    "content_b": "[\"a\",\"b\",\"c\"]",
    "args": ["-p"],
    "should_error": true,
    "expected_exit": 2,
    "compliance_level": "format"
  }
]