[
  {
    "name": "set_option_basic",
    "description": "Array treated as set ignoring order",
    "category": "options",
    "content_a": "{\"tags\":[1,2,3]}",
    "content_b": "{\"tags\":[3,1,2]}",
    "options": ["SET"],
    "expected_output": ""
  },
  {
    "name": "set_option_with_changes",
    "description": "Set operations show additions and removals",
    "category": "options",
    "content_a": "{\"tags\":[\"red\",\"blue\",\"green\"]}",
    "content_b": "{\"tags\":[\"red\",\"blue\",\"yellow\"]}",
    "options": ["SET"],
    "expected_output": "^ \"SET\"\n@ [\"tags\",{}]\n- \"green\"\n+ \"yellow\"\n"
  },
  {
    "name": "multiset_option",
    "description": "Array treated as multiset counting duplicates",
    "category": "options",
    "content_a": "{\"items\":[1,1,2,3]}",
    "content_b": "{\"items\":[1,2,2,4]}",
    "options": ["MULTISET"],
    "accepted_lines": [
      ["^ \"MULTISET\""],
      ["@ [\"items\",[]]"],
      ["- 1", "- 3"],
      ["+ 2", "+ 4"]
    ]
  },
  {
    "name": "precision_option",
    "description": "Numeric precision tolerance",
    "category": "options",
    "content_a": "{\"value\":10.1}",
    "content_b": "{\"value\":10.15}",
    "options": [{"precision": 0.1}],
    "expected_output": ""
  },
  {
    "name": "precision_option_exceeded",
    "description": "Precision tolerance exceeded shows difference",
    "category": "options",
    "content_a": "{\"value\":10.0}",
    "content_b": "{\"value\":10.2}",
    "options": [{"precision": 0.1}],
    "expected_output": "^ {\"precision\":0.1}\n@ [\"value\"]\n- 10\n+ 10.2\n"
  },
  {
    "name": "keys_option",
    "description": "Object matching by specified keys",
    "category": "options",
    "content_a": "{\"users\":[{\"id\":1,\"name\":\"Alice\",\"age\":25}]}",
    "content_b": "{\"users\":[{\"id\":1,\"name\":\"Alice\",\"age\":26}]}",
    "options": [{"keys": ["id"]}],
    "expected_output": "^ {\"keys\":[\"id\"]}\n@ [\"users\",{\"id\":1},\"age\"]\n- 25\n+ 26\n"
  },
  {
    "name": "multiple_keys",
    "description": "Object matching by multiple keys",
    "category": "options",
    "content_a": "{\"items\":[{\"type\":\"fruit\",\"id\":\"apple\",\"color\":\"red\"}]}",
    "content_b": "{\"items\":[{\"type\":\"fruit\",\"id\":\"apple\",\"color\":\"green\"}]}",
    "options": [{"keys": ["type", "id"]}],
    "expected_output": "^ {\"keys\":[\"type\",\"id\"]}\n@ [\"items\",{\"id\":\"apple\",\"type\":\"fruit\"},\"color\"]\n- \"red\"\n+ \"green\"\n"
  },
  {
    "name": "opts_json_set",
    "description": "JSON options array with SET",
    "category": "options",
    "content_a": "{\"items\":[1,2,3]}",
    "content_b": "{\"items\":[3,1,2]}",
    "options": ["SET"],
    "expected_output": ""
  },
  {
    "name": "opts_precision",
    "description": "JSON options with precision object",
    "category": "options",
    "content_a": "{\"temp\":20.1}",
    "content_b": "{\"temp\":20.15}",
    "options": [{"precision": 0.1}],
    "expected_output": ""
  },
  {
    "name": "path_options_set",
    "description": "PathOptions targeting specific path with SET",
    "category": "path_options",
    "content_a": "{\"tags\":[\"a\",\"b\"],\"items\":[1,2]}",
    "content_b": "{\"tags\":[\"b\",\"a\"],\"items\":[2,1]}",
    "options": [{"@":["tags"],"^":["SET"]}],
    "expected_output": "^ {\"@\":[\"tags\"],\"^\":[\"SET\"]}\n@ [\"items\",0]\n[\n+ 2\n  1\n@ [\"items\",2]\n  1\n- 2\n]\n"
  },
  {
    "name": "path_options_precision",
    "description": "PathOptions with precision on specific field",
    "category": "path_options",
    "content_a": "{\"temp\":20.12,\"pressure\":1013.25}",
    "content_b": "{\"temp\":20.15,\"pressure\":1013.30}",
    "options": [{"@":["temp"],"^":[{"precision":0.1}]}],
    "expected_output": "^ {\"@\":[\"temp\"],\"^\":[{\"precision\":0.1}]}\n@ [\"pressure\"]\n- 1013.25\n+ 1013.3\n"
  },
  {
    "name": "path_options_nested",
    "description": "PathOptions on nested paths",
    "category": "path_options",
    "content_a": "{\"data\":{\"values\":[3,1,2]}}",
    "content_b": "{\"data\":{\"values\":[1,2,3]}}",
    "options": [{"@":["data","values"],"^":["SET"]}],
    "expected_output": ""
  },
  {
    "name": "multiple_path_options",
    "description": "Multiple PathOptions in single command",
    "category": "path_options",
    "content_a": "{\"tags\":[\"x\",\"y\"],\"scores\":[85.1,92.05]}",
    "content_b": "{\"tags\":[\"y\",\"x\"],\"scores\":[85.15,92.1]}",
    "options": [{"@":["tags"],"^":["SET"]},{"@":["scores"],"^":[{"precision":0.1}]}],
    "expected_output": ""
  },
  {
    "name": "diff_off_option",
    "description": "DIFF_OFF ignores changes at specified path",
    "category": "path_options",
    "content_a": "{\"data\":\"important\",\"timestamp\":\"2023-01-01\"}",
    "content_b": "{\"data\":\"important\",\"timestamp\":\"2023-01-02\"}",
    "options": [{"@":["timestamp"],"^":["DIFF_OFF"]}],
    "expected_output": ""
  },
  {
    "name": "diff_on_allowlist",
    "description": "Allow-list approach with DIFF_OFF root and DIFF_ON specific",
    "category": "path_options",
    "content_a": "{\"important\":\"data\",\"ignore1\":\"x\",\"ignore2\":\"y\"}",
    "content_b": "{\"important\":\"changed\",\"ignore1\":\"z\",\"ignore2\":\"w\"}",
    "options": [{"@":[],"^":["DIFF_OFF"]},{"@":["important"],"^":["DIFF_ON"]}],
    "expected_output": "^ {\"@\":[],\"^\":[\"DIFF_OFF\"]}\n^ {\"@\":[\"important\"],\"^\":[\"DIFF_ON\"]}\n@ [\"important\"]\n- \"data\"\n+ \"changed\"\n"
  },
  {
    "name": "set_with_null_values",
    "description": "Set operations with null values",
    "category": "options",
    "content_a": "[null, 1, null, 2]",
    "content_b": "[1, null, 3]",
    "options": ["SET"],
    "expected_output": "^ \"SET\"\n@ [{}]\n- 2\n+ 3\n"
  },
  {
    "name": "multiset_duplicate_counting",
    "description": "Multiset properly counts duplicates",
    "category": "options",
    "content_a": "[1, 1, 1, 2, 2]",
    "content_b": "[1, 1, 2, 2, 2, 3]",
    "options": ["MULTISET"],
    "accepted_lines": [
      ["^ \"MULTISET\""],
      ["@ [[]]"],
      ["- 1"],
      ["+ 2", "+ 3"]
    ]
  },
  {
    "name": "precision_edge_boundary",
    "description": "Precision within boundary",
    "category": "options",
    "content_a": "{\"val\": 1.0}",
    "content_b": "{\"val\": 1.05}",
    "options": [{"precision": 0.1}],
    "expected_output": ""
  },
  {
    "name": "precision_just_over_boundary",
    "description": "Precision just over boundary",
    "category": "options",
    "content_a": "{\"val\": 1.0}",
    "content_b": "{\"val\": 1.10001}",
    "options": [{"precision": 0.1}],
    "expected_output": "^ {\"precision\":0.1}\n@ [\"val\"]\n- 1\n+ 1.10001\n"
  }
]
